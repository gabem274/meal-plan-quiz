<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PCOS Meal Planning Quiz â€“ Nourished Natural Health</title>

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500&family=Fraunces:opsz,wght@9..144,500&display=swap"
    rel="stylesheet"
  />

  <!-- Klaviyo Snippet -->
  <script>
    (function(){
      var _learnq = window._learnq = window._learnq||[];
      if (!_learnq.init) {
        ["identify","track","trackForm","page","subscribe"].forEach(function(m){
          _learnq[m] = function(){ _learnq.push([m].concat(Array.from(arguments))); };
        });
        var s = document.createElement("script");
        s.async = true;
        s.src = "https://static.klaviyo.com/onsite/js/klaviyo.js?company_id=S4cYEr";
        document.head.appendChild(s);
        _learnq.init = true;
      }
    })();
  </script>

  <style>
    :root {
      --color-primary: #BC0B40;
      --color-secondary: #06604A;
      --color-text: #1E1B1C;
      --spacing: 1rem;
      --font-heading: 'Fraunces', serif;
      --font-body: 'DM Sans', sans-serif;
    }
    *, *::before, *::after { box-sizing: border-box; }
    body { margin: 0; font-family: var(--font-body); color: var(--color-text); line-height: 1.5; background: #F8F6F3; }
    .quiz-container { max-width: 480px; margin: 0 auto; padding: calc(var(--spacing)*2); }
    .screen { display: none; }
    .screen.active { display: block; }
    h1 { font-family: var(--font-heading); font-size: 2rem; margin-bottom: var(--spacing); color: var(--color-primary); text-align: center; }
    h2 { font-family: var(--font-heading); font-size: 1.25rem; margin-bottom: calc(var(--spacing)*0.5); }
    p { margin-bottom: var(--spacing); }
    .btn {
      display: block; width: 100%; padding: var(--spacing);
      margin: calc(var(--spacing)*0.5) 0; font-size: 1rem;
      border: none; border-radius: 8px; background: var(--color-primary);
      color: #fff; cursor: pointer; font-family: var(--font-body);
      text-align: center;
    }
    label, input {
      display: block; width: 100%; margin-bottom: var(--spacing);
      font-size: 1rem; color: var(--color-text);
    }
    input { padding: calc(var(--spacing)*0.5); border:1px solid #ccc; border-radius:4px; }
    #email-error { color: var(--color-secondary); display: none; }
  </style>
</head>
<body>
  <div class="quiz-container">
    <!-- Cover -->
    <div class="screen active" id="screen-cover">
      <h1>Find Your PCOS Meal Plan</h1>
      <p>Answer a few questions to get a personalized meal plan for managing your PCOS.</p>
      <button type="button" id="btn-start" class="btn">Get Started</button>
    </div>

    <!-- Q1: Health Goal -->
    <div class="screen" data-step="1">
      <h2>What is your number 1 health goal?</h2>
      <button class="btn" data-value="Weight loss">Weight loss</button>
      <button class="btn" data-value="Clear skin">Clear skin</button>
      <button class="btn" data-value="Improved gut health">Improved gut health</button>
      <button class="btn" data-value="Less unwanted hair">Less unwanted hair</button>
      <button class="btn" data-value="Other">Other</button>
    </div>

    <!-- Q2: Age -->
    <div class="screen" data-step="2">
      <h2>What is your current age?</h2>
      <input id="input-age" type="number" placeholder="e.g. 30" required />
      <button id="btn-next-age" class="btn">Next</button>
    </div>

    <!-- Q3: Current Weight -->
    <div class="screen" data-step="3">
      <h2>What is your current weight? (kg)</h2>
      <input id="input-weight" type="number" placeholder="e.g. 75" required />
      <button id="btn-next-weight" class="btn">Next</button>
    </div>

    <!-- Q4: Target Weight -->
    <div class="screen" data-step="4">
      <h2>What is your target weight? (kg)</h2>
      <input id="input-target-weight" type="number" placeholder="e.g. 65" required />
      <button id="btn-next-target" class="btn">Next</button>
    </div>
    
    <!-- Email Capture -->
    <div class="screen" id="screen-email">
      <h2>Almost done!</h2>
      <p>Add your email and we'll send your personalized meal plan straight to your inbox.</p>
      <input id="email" type="email" placeholder="you@example.com" required />
      <button id="btn-submit-email" class="btn">Get My Meal Plan</button>
      <p id="email-error">Please enter a valid email.</p>
    </div>

    <!-- Final Screen -->
    <div class="screen" id="screen-result">
      <h2>Your meal plan is on its way!</h2>
      <p>Check your email for the next steps to start your customized PCOS meal plan.</p>
    </div>
  </div>

  <script>
    const screens = document.querySelectorAll('.screen');
    const responses = {};
    let step = 0;

    function showScreen(index) {
      screens.forEach(s => s.classList.remove('active'));
      screens[index].classList.add('active');
    }

    document.getElementById('btn-start').addEventListener('click', () => {
      step = 1; showScreen(1);
    });

    // Q1 handler
    document.querySelectorAll('[data-step="1"] .btn').forEach(btn => {
      btn.addEventListener('click', e => {
        responses.healthGoal = e.target.dataset.value;
        step = 2; showScreen(2);
      });
    });

    // Age
    document.getElementById('btn-next-age').addEventListener('click', () => {
      const age = document.getElementById('input-age').value.trim();
      if (!age) return;
      responses.age = age;
      step = 3; showScreen(3);
    });

    // Current weight
    document.getElementById('btn-next-weight').addEventListener('click', () => {
      const w = document.getElementById('input-weight').value.trim();
      if (!w) return;
      responses.currentWeight = w;
      step = 4; showScreen(4);
    });

    // Target weight
    document.getElementById('btn-next-target').addEventListener('click', () => {
      const tw = document.getElementById('input-target-weight').value.trim();
      if (!tw) return;
      responses.targetWeight = tw;
      // advance to email capture (assuming no more screens)
      step = screens.length - 2; showScreen(step);
    });

    // Email Submission
    document.getElementById('btn-submit-email').addEventListener('click', () => {
      const emailEl = document.getElementById('email');
      const email = emailEl.value.trim();
      const err = document.getElementById('email-error');
      if (!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(email)) {
        err.style.display = 'block';
        return;
      }
      err.style.display = 'none';
      responses.email = email;

      // Send to Klaviyo
      window._learnq.push(['identify', Object.assign({email, accepts_marketing:true}, responses)]);
      window._learnq.push(['subscribe', {listId:'URJwDU', email, confirm_optin:false}]);

      // Show final screen
      step = screens.length - 1; showScreen(step);
    });
  </script>
</body>
</html>
